<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/2023/02/26/hello-world/</url>
    <content><![CDATA[<p>Welcome to <span class="exturl"><a class="exturl__link"   href="https://hexo.io/" >Hexo</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>! This is your very first post. Check <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/" >documentation</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> for more info. If you get any problems when using Hexo, you can find the answer in <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/troubleshooting.html" >troubleshooting</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span> or you can ask me on <span class="exturl"><a class="exturl__link"   href="https://github.com/hexojs/hexo/issues" >GitHub</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>.</p>

        <h2 id="Quick-Start"   >
          <a href="#Quick-Start" class="heading-link"><i class="fas fa-link"></i></a><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2>
      
        <h3 id="Create-a-new-post"   >
          <a href="#Create-a-new-post" class="heading-link"><i class="fas fa-link"></i></a><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3>
      <figure class="highlight bash"><div class="table-container"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></div></figure>

<p>More info: <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/writing.html" >Writing</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="Run-server"   >
          <a href="#Run-server" class="heading-link"><i class="fas fa-link"></i></a><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3>
      <figure class="highlight bash"><div class="table-container"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></div></figure>

<p>More info: <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/server.html" >Server</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="Generate-static-files"   >
          <a href="#Generate-static-files" class="heading-link"><i class="fas fa-link"></i></a><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3>
      <figure class="highlight bash"><div class="table-container"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></div></figure>

<p>More info: <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/generating.html" >Generating</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>

        <h3 id="Deploy-to-remote-sites"   >
          <a href="#Deploy-to-remote-sites" class="heading-link"><i class="fas fa-link"></i></a><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3>
      <figure class="highlight bash"><div class="table-container"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></div></figure>

<p>More info: <span class="exturl"><a class="exturl__link"   href="https://hexo.io/docs/one-command-deployment.html" >Deployment</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span></p>
]]></content>
  </entry>
  <entry>
    <title>title</title>
    <url>/2023/02/26/title/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>Linux</category>
        <category>tools</category>
        <category>Python</category>
        <category>web</category>
        <category>Database</category>
      </categories>
  </entry>
  <entry>
    <title>网站相关的告警</title>
    <url>/2023/02/27/%E7%BD%91%E7%AB%99%E7%9B%B8%E5%85%B3%E7%9A%84%E5%91%8A%E8%AD%A6/</url>
    <content><![CDATA[<p>监控ssl证书到期时间<br>#!&#x2F;bin&#x2F;bash</p>

        <h1 id="定义网站域名和端口号信息"   >
          <a href="#定义网站域名和端口号信息" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义网站域名和端口号信息" class="headerlink" title="定义网站域名和端口号信息"></a>定义网站域名和端口号信息</h1>
      <p>#WebName&#x3D;”hrss-main.wdeduc.com”<br>WebName&#x3D;”<span class="exturl"><a class="exturl__link"   href="http://www.baidu.com/" >www.baidu.com</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>“<br>Port&#x3D;”443”</p>

        <h1 id="通过-Openssl-工具获取到当前证书的到期时间"   >
          <a href="#通过-Openssl-工具获取到当前证书的到期时间" class="heading-link"><i class="fas fa-link"></i></a><a href="#通过-Openssl-工具获取到当前证书的到期时间" class="headerlink" title="通过 Openssl 工具获取到当前证书的到期时间"></a>通过 Openssl 工具获取到当前证书的到期时间</h1>
      <p>Cert_END_Time&#x3D;$(echo | openssl s_client -servername ${WebName} -connect ${WebName}:${Port} 2&gt; &#x2F;dev&#x2F;null | openssl x509 -noout -dates | grep ‘After’ | awk -F ‘&#x3D;’ ‘{print $2}’ | awk ‘{print $1,$2,$4}’)</p>

        <h1 id="将证书的到期时间转化成时间戳"   >
          <a href="#将证书的到期时间转化成时间戳" class="heading-link"><i class="fas fa-link"></i></a><a href="#将证书的到期时间转化成时间戳" class="headerlink" title="将证书的到期时间转化成时间戳"></a>将证书的到期时间转化成时间戳</h1>
      <p>Cert_NED_TimeStamp&#x3D;$(date +%s -d “$Cert_END_Time”)</p>

        <h1 id="定义当前时间的时间戳"   >
          <a href="#定义当前时间的时间戳" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义当前时间的时间戳" class="headerlink" title="定义当前时间的时间戳"></a>定义当前时间的时间戳</h1>
      <p>Create_TimeStamp&#x3D;$(date +%s)</p>

        <h1 id="通过计算获取到证书的剩余天数"   >
          <a href="#通过计算获取到证书的剩余天数" class="heading-link"><i class="fas fa-link"></i></a><a href="#通过计算获取到证书的剩余天数" class="headerlink" title="通过计算获取到证书的剩余天数"></a>通过计算获取到证书的剩余天数</h1>
      <p>Rest_Time&#x3D;$(expr $(expr $Cert_NED_TimeStamp - $Create_TimeStamp) &#x2F; 86400)</p>

        <h1 id="配置告警提示信息"   >
          <a href="#配置告警提示信息" class="heading-link"><i class="fas fa-link"></i></a><a href="#配置告警提示信息" class="headerlink" title="配置告警提示信息"></a>配置告警提示信息</h1>
      <p>echo “$WebName  网站的 SSL 证书还有 $Rest_Time 天后到期idc” &gt; ssl-monitor.txt</p>

        <h1 id="定义钉钉机器人的-API-接口"   >
          <a href="#定义钉钉机器人的-API-接口" class="heading-link"><i class="fas fa-link"></i></a><a href="#定义钉钉机器人的-API-接口" class="headerlink" title="定义钉钉机器人的 API 接口"></a>定义钉钉机器人的 API 接口</h1>
      <p>WebHook&#x3D;’<span class="exturl"><a class="exturl__link"   href="https://oapi.dingtalk.com/robot/send?access_token=20e3ec13&label=idc&msg_type=markdown" >https://oapi.dingtalk.com/robot/send?access_token=20e3ec13&amp;label=idc&amp;msg_type=markdown</a><span class="exturl__icon"><i class="fas fa-external-link-alt"></i></span></span>‘<br>#idc关键字存放于echo里面才能触发告警</p>

        <h1 id="通过-Curl-命令来发送-Post-请求"   >
          <a href="#通过-Curl-命令来发送-Post-请求" class="heading-link"><i class="fas fa-link"></i></a><a href="#通过-Curl-命令来发送-Post-请求" class="headerlink" title="通过 Curl 命令来发送 Post 请求"></a>通过 Curl 命令来发送 Post 请求</h1>
      <p>curl “${WebHook}” -H ‘Content-Type: application&#x2F;json’ -d ‘<br>{<br>    “msgtype”: “text”,<br>    “text”: {<br>        “content”: “告警通知’”$(cat ssl-monitor.txt)”‘“<br>    }<br>}’ &amp;&gt; ssl_check.log                   </p>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>监控</tag>
      </tags>
  </entry>
</search>
